<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="assets/css/profile.css"> <!-- Link to your CSS file -->
</head>
<body>
    <div class="profile-container">
        <h1 id="userName"></h1>
        <img id="userPhoto" src="#" alt="Profile Picture" style="max-width: 200px; border-radius: 50%; display: none;">
        <p><strong>Father's Name:</strong> <span id="userFather"></span></p>
        <p><strong>Mother's Name:</strong> <span id="userMother"></span></p>
        <p><strong>Diagnosis:</strong> <span id="userDiagnosis"></span></p>
        <p><strong>Gender:</strong> <span id="userGender"></span></p>
        <p><strong>Age:</strong> <span id="userAge"></span></p>
        <p><strong>Notes:</strong> <span id="userNotes"></span></p>
        <p><strong>On Therapy:</strong> <span id="userTreat"></span></p>
        <a href="/user.html">Back to Users</a>
    </div>

    <script>
        // Get the profile ID from the URL
        const profileId = window.location.pathname.split('/').pop();

        // Fetch the profile data from the server
        fetch(`/profile/${profileId}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Profile not found');
                }
                return response.json();
            })
            .then(profile => {
                // Populate the fields with data from the profile
                document.getElementById('userName').innerText = profile.name;
                document.getElementById('userFather').innerText = profile.father;
                document.getElementById('userMother').innerText = profile.mother;
                document.getElementById('userDiagnosis').innerText = profile.diagnosis;
                document.getElementById('userGender').innerText = profile.gender;
                document.getElementById('userAge').innerText = profile.age;
                document.getElementById('userNotes').innerText = profile.notes;
                document.getElementById('userTreat').innerText = profile.treat;

                const userPhoto = document.getElementById('userPhoto');
                userPhoto.src = profile.photo; // Set the photo path from the profile
                userPhoto.style.display = 'block'; // Show the photo
            })
            .catch(error => {
                console.error('Error fetching profile:', error);
                document.querySelector('.profile-container').innerText = 'Profile not found.';
            });
    </script>
</body>
</html>